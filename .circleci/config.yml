version: 2
jobs:
  build:
    docker:
      - image: circleci/node:9.8.0-browsers
      - image: circleci/mysql:5.6.39-ram

    working_directory: ~/repo

    steps:
      - run: sudo apt-get update
      - run: sudo apt-get install mysql-client
      - run: sleep 5
      - run: mysql -h $RDS_HOSTNAME -u $RDS_USERNAME -e 'CREATE DATABASE $RDS_DB_NAME'
      - run: mysql -h $RDS_HOSTNAME -u $RDS_USERNAME -e 'SHOW DATABASES'
      # - checkout

      # # Download and cache dependencies
      # - restore_cache:
      #     keys:
      #     - v1-dependencies-{{ checksum "package.json" }}
      #     # fallback to using the latest cache if no exact match is found
      #     - v1-dependencies-

      # - run: npm install

      # - save_cache:
      #     paths:
      #       - node_modules
      #     key: v1-dependencies-{{ checksum "package.json" }}

      # - run: npm run check
